<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="../angular.min.js"></script>
</head>
<body ng-app="body">
<div ng-controller="c1">
    <xxx>111</xxx>
    <!--<div sh></div>-->
    {{name}}
</div>
</body>
<script>
    //controller 就几乎等同于controller controllerAs是给这个controller起个名字
    angular.module('body',[])
            .directive('xxx',function(){
                return {
                    restrict:"ECMA",
                    template:'<div><div>Sherry</div><sh>哼哼</sh></div>',
                    replace:true,

                    controller:function($scope){
                        $scope.name='aaa';
                        this.addBook=function(){
                            alert(1)
                        }
                    },
                    controllerAs:'bookList',
                    link:function(scope,element,attr,a){
//                        console.log(a.addBook)
//                        console.log(element)
                    }
                }


            })

            .directive('sh',function(){
                return {
                    restrict:'ECMA',
                    template:'<button>She</button>',
                    replace:true,

                    require:'^xxx', //调用的是directive的名字 1.什么都不写同层找 2.^往上找 3.？往下找
                    link:function(scope,element,attr,as){
                        element.on('click',function(){
                            as.addBook()
                        })

                    }
                }
            })


            .controller('c1',['$scope',function($scope){
            }])
</script>
</html>